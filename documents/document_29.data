U61KCTX8S : how do i do this?
U1ALMRBLL : <@U61KCTX8S> this slack has a message limit that, when hit, removes the messages. I'm not sure whether multiple short messages like yours are counted as one, or as many, but consider combining them into a single, formatted message (a nice bonus is, they are more readable). just fyi
U1ALMRBLL : to answer your question — what does "I'd like to run a couple of functions" mean exactly? What you've posted certainly does just that. But what is the point?
U1ALMRBLL : ```(defn -main []
  (func1)
  (func2))
```
The result of the above will be whatever `(func2)` evaluates to. Of course, if `(func1)` produces side-effects (I/O, etc), these side-effects will occur.

U1CTH1TUY : *unless `(func1)` produces a lazy sequence which would never be realized.
U61KCTX8S : you are right, it didnt compile because of some other mistake
U61KCTX8S : but
U61KCTX8S : (defn -main  "This should be pretty simple."
  []
  (
   (println "hallo")
   (println "hallo2")
  ))

U61KCTX8S : prints both hellos
U61KCTX8S : but gives after it a null pointer exceptoin
U1ALMRBLL : yes, try this, and see the difference:```(defn mainnn
  "This should be pretty simple."
  []
  (println "hallo")
  (println "hallo2"))```

U1ALMRBLL : You have an extra paren before the first `println`. This evaluates the result of the first `(println "hallo")`, which is `nil`, as a function, and this is what creates the NPE.
U61KCTX8S : i see
U61KCTX8S : thanks, i nearly solved my problem
U61KCTX8S : i'll come later back to it after I enjoy some nightlife in Wroc?aw
U61KCTX8S : Cheers :slightly_smiling_face:
U1C4WJMT5 : Hello, I have a small question about spec. How does one specify a constant value in a regex spec? Like a vector that always must start with a keyword. I can do something like this `(spec/cat :type #{:message} :contents string?)` (as part of a multi spec), but is there a way to say the first thing in the sequence must be `:message`?
U066TMAKS : is there an idiomatic way to create a keyword in the current namespace, or is `(keyword (str *ns*) s)` pretty much it?
U0NCTKEV8 : don't do that
U0NCTKEV8 : the behavior of `*ns*` is almost certainly not what you expect it to be
U066TMAKS : you might have better luck asking in <#C1B1BB2Q3|clojure-spec>
U0NCTKEV8 : there is no such thing as the "current namespace" at runtime
U066TMAKS : what about at compile time? is there a shortcut for a keyword in the namespace I'm writing the code in? something like `::`. I could do `(keyword "app.models.user" s)` but that seems verbose and potentially brittle to refactoring
U051SS2EU : if you want it to be the namspace calling your function/macro then `*ns*` works - but that won't give you the ns your definition came from
U0NCTKEV8 : I am not sure how to read that, but it doesn't seem to be correct
U0NCTKEV8 : `*ns*` is set by the compiler when *compiling* code, when running code its value is arbitrary
U051SS2EU : sorry, right - it will be the arbitrary value of `*ns*` at runtime for a function, but for a macro it will be the ns being defined
U0NCTKEV8 : some execution environments preserver the value of `*ns*` between compilations (the repl), but common environments do not
U0NCTKEV8 : macro expansion happens at compile time, so macros can observe a meaningful value of `*ns*`
U0NCTKEV8 : when a function is being compiled, the compiler uses `*ns*` to figure out which vars it uses, but those vars are then embedded in the generated bytecode, and when the bytecode is run, it never looks at the value of `*ns*` again
U04V70XH6 : What we do at World Singles is to have `(def ^:private my-ns *ns*)` near the top of each namespace where we need the "current namespace" and then use `my-ns` instead of `*ns*`.
U04V70XH6 : That way it's bound to the file's namespace at load/compile time and doesn't change during program execution.
U1WMPA45U : why does `(get-in {:a (vector {:b :c})} [:a 0 :b])` work, but `(get-in {:a (list {:b :c})} [:a 0 :b])` doesn't?
U1WMPA45U : ah, I guess the answer is "lists aren't associative, but vectors are"
U1WMPA45U : not that that's all that satisfactory, but it makes sense
U06DQC6MA : <@U1WMPA45U> it's good to have that choice, no?
U621RMVAN : hi everyone
U621RMVAN : is this a good place to ask newbie questions?
U051SS2EU : there's <#C053AK3F9|beginners>
U621RMVAN : cool, thank you
U61KCTX8S : I asked beginner questions here :slightly_smiling_face:
U61KCTX8S : and nobody complained!
U04V70XH6 : Depends on the audience and the time of day. But we _try_ to encourage focus to ask beginner Qs in <#C053AK3F9|beginners> so folks can opt-in/-out.
U06DQC6MA : What I remember of clojure IRC was that you were free to ask beginner questions. I know because I asked many of them. I'm not sure the distinction. I'm still a beginner.
U04V70XH6 : <@U06DQC6MA> We're all beginners on different topics :slightly_smiling_face: The main difference from IRC (apart from the wonderful Slack UI/UX) is the plethora of channels here... (and this is getting meta so <#C03RZGPG3|off-topic> if we really want to go down that path).
U1Q12R4F2 : Hello everyone, I have an app which generates documents (for example blog posts). Each document has an ID and consists of Text, Tables, Lists etc. and is completely defined in EDN. I want to store these documents but due to not consistent, changing keys it is not easy to store this in a RDBMS-Table. So at the moment I have a table in my h2db which has two colums "ID" and "data", where data is a cblob and stores the edn serialized as a string..Is there a better "clojury"-way to store edn documents?

U0J30HBRS : <@U1Q12R4F2> Maybe serialize it using something like <https://github.com/ptaoussanis/nippy/blob/master/README.md>
U5H74UNSF : <@U1Q12R4F2> there's also <https://github.com/cognitect/transit-format> which is what we're using which is a good fit if you want to use it in a browser because it can be used on top of json
U0J30HBRS : <@U5H74UNSF> <@U1Q12R4F2> However, transit isn't for storing data (yet)&gt; NOTE: Transit is a work in progress and may evolve based on feedback. As a result, while Transit is a great option for transferring data between applications, it should not yet be used for storing data durably over time. This recommendation will change when the specification is complete.

U5H74UNSF : <@U0J30HBRS> right… we just ignored that. it does seem fairly stable at this point there's not much activity in the repo anymore. Was wondering if that recommendation was going to change…
U1Q12R4F2 : <@U0J30HBRS> I was thinking about using nippy, because of their built-in compression functionality.  But my main concern is not the serializing part, but using the clob or blob for storing the data. Accessing the document doesn't feel native (sql query, reading clob, deserialize data). I hoped there was an mongodb-equivalent for clojure/edn :sweat_smile:

U61HA86AG : what about datomic?
U1Q12R4F2 : Its a low budget project, Im looking primarily for open/free software
U5XMV6DQT : datascript
U61HA86AG : datomic starter is free
U1Q12R4F2 : <@U61HA86AG>: but after 1 year there will be no updates and my project relys on an old unmaintained version, if I understand the description correctly?
U050SC7SV : Yup
U050SC7SV : No go for serious work imho
U61HA86AG : ah didnt know that, havent used it myself yet :stuck_out_tongue:
U5YHX0TQV : maybe it's time for an edn datatype in postgresql :wink:
U5YHX0TQV : like jsonb
U1LJAM1U7 : <@U1ALMRBLL> <@U04V70XH6> due to non technical reasons, my PR <https://github.com/clojure/clojure-site/pull/194> did not make it. If anybody could adopt it, it would be great :morning:
U06GS6P1N : <@U1Q12R4F2> storing fressian in a BLOB or edn in a CLOB is fine as long as you don't need atomic updates or native queries, otherwise I strongly advise against it (you may then want to use JSON support in a sql db, or a document store). There is no such thing as a 'clojury' way of designing a database imho - this should be language independent :)
U2J4FRT2T : I still think that will be awesome do something like `:find ?edn :where [?e :graph/data ?edn] [(contains? ?edn :foo) true]`
U06GS6P1N : There is no way to make this efficient in Datomic currently
U09FL65DK : starting nREPL for the first time on this machine says "could not transfer ... unable to find valid certification path to requested target". We have a custom certificate at work that sits at top of everything. What should I do to get nREPL (is it using maven behind?) to use it when downloading artifacts? E.g. in `pip` I need to add in `~/.pip/pip.conf` a line saying `cert = /etc/ssl/certs/ca-certificates.crt`
U051SS2EU : by nrepl do you mean leiningen?
U051SS2EU : lein does not use maven, but it speaks to the same repos, you probably need to make sure your java certificates are properly set up
U1Q12R4F2 : val_waeselynck: updates are rarely and only done from one person (the document author). Native queries aren't needed. The documents are self-contained, so there are no dependencies to other tables. But inside the document there are dependencies, thats why I was unsure if I should break the document hash-map into normalized database tables or just store the whole document in  a clob just like it is stored at runtime.
I think I'll stick with the clob solution.

U09FL65DK : <@U051SS2EU> I installed leiningen and ran `cider-jack-in` in a `.clj` file in emacs
U051SS2EU : right, but nrepl doesn't download things, leiningen does
U09FL65DK : I get that, but I don't know where to stick in the certificate
U051SS2EU : anyway, depending on your OS there's various ways to make sure your java certs are OK
U09FL65DK : well if you have a link or something, hit me :slightly_smiling_face: ubuntu
U09FL65DK : we use maven here but it's all proxied through a locally set up mirror
U051SS2EU : oh, that's the one I know `/var/lib/dpkg/info/ca-certificates-java.postinst configure`
U051SS2EU : or perhaps this <https://stackoverflow.com/a/33440168>
U09FL65DK : that did write a lot of "Replacing ..." lines and a "done." in the end which didn't solve the problem
U051SS2EU : what about the SO version?
U09FL65DK : still a nope
U051SS2EU : weird - is the cert installed in such a way that ubuntu ca-certificates would know about it / use it?
U051SS2EU : because that should have fixed it if it is
U051SS2EU : <https://askubuntu.com/questions/645818/how-to-install-certificates-for-command-line>
U09FL65DK : yes it's correct, other package managers work fine with it
U09FL65DK : (once I set the ca-file)
U051SS2EU : no I'm saying add the ca-file to ubuntu itself
U051SS2EU : then set up java's certs from ubuntu
U051SS2EU : though, if you want to do it the tedious way you could also manually add that cert to java...
U09FL65DK : the askubuntu link you sent is how we set up the certs in ubuntu
U051SS2EU : <https://stackoverflow.com/a/28324237>
U051SS2EU : then I have no idea what's wrong here
U09FL65DK : the best option would be to add the mirrors we use for maven into my leiningen profile. I'm just not sure how to write it down. I'd need a ~/.m2/settings.xml to leiningen profile converter
U051SS2EU : this isn't maven, lein doesn't use maven
U051SS2EU : it can access maven repos... but doesn't use maven itself
U051SS2EU : sorry, misread
U051SS2EU : this should be system level config properly propagated to java, it shouldn't even be leiningen's concern
U09FL65DK : it's hard to tell where the problem lies, it could even be that the network here is deliberately blocking direct access to the repos since they want us to use the supplied mirrors
U051SS2EU : one thing to rule out would be that ca-certificates.postinst or the purge / reinstall of ca-certs didn't undo your custom cert addition
U051SS2EU : there might be a less heavy handed way to add the cert and also make sure it updates java without doing a purge / install cycle...
U09FL65DK : I managed to add our mirror to `profiles.clj` but it only mirrors the maven repo, so I get the same error when I get to dependencies that are on clojars :disappointed:
U09FL65DK : <@U051SS2EU> I found the culprit - the certificates are OK, for some reason a bad java is being used. Now I just need to find out who picked that version and why
U051SS2EU : in terms of the wrong java being installed, or the wrong one picked out of those installed?
U051SS2EU : if the latter, that can be fixed with update-alternatives
U09FL65DK : the wrong one picked, because I installed `lein` via `nix` :slightly_smiling_face:
U051SS2EU : that's not what decides it is it? I mean lein just looks for the first java on path
U051SS2EU : unless nix changes that...
U09FL65DK : I'm pretty sure `nix` changes it since they are all about being reproducible and immutable etc. Also `command -v java` from emacs returns `/usr/bin/java` which points to ubuntu java, not the nix one
U09FL65DK : all in all I just got  it to wok :slightly_smiling_face:
U051SS2EU : using lein via a package manager seems fishy to me, sort of like using the jvm inside a container - I know there are valid reasons, but lein already manages its version better than most package managers will and the jvm already isolates differences between environments...
U1S4F3M4M : Hi, all! Does anyone have some good recommendations on resources covering/showing proper use of records and protocols? I've been using Clojure happily for three years without them, mostly on a hobby basis, and feel that I understand them pretty well, but when I start using them or thinking about how to do it, I feel like I'm going all OOP. Hopefully the question makes sense.
U064WBEPL : <@U1S4F3M4M> I cover this a bit in my presentations about Component <https://stuartsierra.com/presentations>
U1S4F3M4M : <@U064WBEPL> Thanks, I'll have a look.
U1S4F3M4M : A follow up question: In my current project where I believe records/protocols is the good fit, I start out with CSV records with lots of fields. Many are not always present. Is it ok to create a record with just a few fields as required (eg. "logtime" and "id") and the rest as optional, event though many other fields are highly useful and used in calculation?
U051SS2EU : that's a pretty normal way to use records - adding fields that aren't defined on them
U051SS2EU : but if you know what they will all be, you could just have them all nil by default...
U1S4F3M4M : <@U051SS2EU> Thanks. What's the benefit of having them be nil? Would that make the generated -&gt;MyRecord requiring a lot of paramters, and possibly not making it a MyRecord if you use map-&gt;MyRecord if you provide a map missing some keys?
U064WBEPL : <@U1S4F3M4M> Records are usually indicated when you also have Protocols (or interfaces) and you plan to have multiple different types of records implementing the same functions for polymorphic behavior.
U051SS2EU : <@U1S4F3M4M> map-&gt;MyRecord always makes a MyRecord, even for an empty map
U051SS2EU : and yes, with more than ~4 fields I would always use map-&gt;MyRecord rather than a positional constructor
U1S4F3M4M : <@U051SS2EU> Thanks, the former was new to me. I guess I need to experiment and see how it goes.
U1S4F3M4M : <@U064WBEPL> I guess my "fear" is to make everything a "method" instead of a function. &lt;- My best description of where I feel it turns strange when using a functional language.
U064WBEPL : <@U1S4F3M4M> You only need "methods" in Clojure if you need polymorphism: different behavior for different types, where the caller doesn't know which type it is.
U1S4F3M4M : <@U064WBEPL> I believe that is the use case I have in my current project, hence the desire to finally dive into records and protocols. I'm using re-frame for the GUI, and tend to aim for generic code. In this case I'm presenting information where the GUI code displays :display, creates tooltip from :tooltip, sets react key from :react-key and so on. What these keys contains differs based on type. I like the way generic code makes it clearer what the code is trying to accomplish, without mixing in a lot of "how". Now the plan is to turn these keys (:display, :toolstip, :react-key, …) into method on a protocol like "Displayable". Anyway, thanks so much for the imput. Now I need to focus on dinner preparations.
U0W0JDY4C : what's the idiomatic way to guarantee some unknown value is inside a sequence, where that value could or could not already be in a sequence?
U0W0JDY4C : ```(into [] val) ;; fails if val isnt already in a seq
(conj [] val) ;; always works but might nest, i.e. [[val...]]
```

U0W0JDY4C : (oh and not be nested, if already in a seq)*
U0W0JDY4C : is it simply `(flatten (conj`?
U051SS2EU : (if (sequential? val) val [val])
U051SS2EU : flatten is terrible
U064X3EF3 : generally the best answer though is to arrange your data so this doesn't occur in the first place
U051SS2EU : the best thing is to not write code that sometimes returns a collection and sometimes a single item (but I realize you aren't always the one who implemented the source of the data)
U064X3EF3 : things that are either &lt;foo&gt; or &lt;collection of foo&gt; tend to be always broken and/or special cased
U0W0JDY4C : ^ agree with alexmiller, except in this case it's relating to an `(assoc` vs an `(assoc-in`.. as in someone might hand me a value to put at `[:foo :bar]` or just `:bar`
U051SS2EU : and they create contagious complexity in consuming code...


in above conversation, code/s mentioned has issue/s?
	If Yes:
	1.Bad	2.Very bad
	If No:
	1.Good	2.Very good


How confident are you?
	1.Low
	2.Average
	3.High

Optional!
can you highlight place/word/sentence which lead to your decision
