```
the common model logic is extracted into the `setFieldOnModel` function and called from both branches of the `case`
the `Foo` branch uses `Cmd.batch` to trigger multiple side effects with commands
hmmm... I had to use update so far because I needed random number generation. But now I have a sequence of operations and model changes that happen after that (for some game logic).
But I think I get what you're trying to say.
can you post an example? It might be easier to give advice on a concrete scenario :slightly_smiling_face:
when you're generating several random numbers at once, it's often better to combine the generators into into a single one that returns a tuple or record and only use a single command
To explain, when the user clicks `Start Game`, `Shuffle List` is called and shuffles a set of domnioes. That's passed to `SetFirstPlayer` which also needs randomness to decide who goes first. That was passed to setGame to make the appropriate model updates.
`SetGame` should be at the same level of indentation as `ShuffleList`.
Could all the randomness be done in one step? Shuffling dominoes and selecting the first player?
I now realize I could've just used one Msg for all the randomness.
map is your friend
But now that the game is set, it automatically starts doing things... The first player must now select a domino from their hand and place it on the board, and pass the turn to the next player, etc. This is all tracked using the model.
So doesn't that mean update functions? This is what I meant by chaining updates.
All the setup can be a single step
but each one of those represents a state where the game must pause waiting for user input. You don't need that pause setting up the game state
There's no pause unless it's the human player. Sorry, wasn't clear. For now, 3 robo players and 1 human player.
But you're right. Until the human players turn, I guess I don't need another update.
you do if you want the visual representation to change
I do. Each player, human or robot, selects a domino to go on the board, which has to be displayed on the screen.
I'd probably have a `playAITurn` generator that does all the random choices for a single AI turn, triggers the update and sets the AI's choices on the model. This triggers a redraw of view.
depending on who the next player is, either wait for the user to do something or `playAITurn` again
possibly put a sleep in there if you don't want the AIs to play too fast
luckily, AI choice implmentation isnt random right now. AI plays a very low level, but methodical way.
yeah, I will need the sleep I suspect
could be random too
since you can't just issue a command it's actually useful to you to require a sleep or such
the random way is to have AI select a domino at random from its hand, and then check if it can be legally played. The other way is to iterate through the hand, and select the first domino that can be legally played.
since the initial hand is assigned at random, I'm not sure that it's any more random doing it the first way than the second.
either way, to dispatch a message back you yourself you need to inject a sideeffect, such as sleep or random generation
Yup. I guess I'm just trying to wrap my head around the structure of the next sequence of events.
and where are the logical breakpoints that I need to send a message.
So far it seems  every time the view needs to change is a good start.
well, update should return any time the view needs to change
I've made this game in python, but I was just using the command line there, so I really wanted to try making a proper UI in elm.
But translating it from OOP to FP has been... a fun challenge.
well, it's a fundamentally different paradigm
I find it's not so different when you have really SOLID code in OOP
in my .NET code I tend to have role interfaces with one member and static classes with static methods, maybe that's just the Elm influence :smile:
<@U4WH8STNX> Yeah... to an extent, some parts are just separating my classes, with attributes being the model, and methods become functions that help those attributes.
but randomness becomes something that I now need to handle explicitly at the edge of my code
it's true that Elm makes you think of the side effects because you can't accidentally introduce them - heavens :unicorn_face:
<@U0LPMPL2U> <@U23SA861Y> <@U4WH8STNX> Thank you very much folks
How to import `Msg` from `Types.elm` so that `Mdl` is visible in that pattern matching?
`import ModuleName exposing (Msg(..))` I think
I tried `import  Types  exposing  (Model, Msg(..))`, but it still says that `cannot find pattern Mdl`.
ah. hmm
I also use mdl, and also have a types module, with a similar set up. But I just use import Types exposing (..) and it all works <@U68N7EGVB>
You want to `module Types exposing (Model, Msg(..))`
otherwise only the `Msg` type gets exposed but not the constructor `Mdl`
Importing `Model` works perfectly fine so the module is seen.
So it looks like it's just importing `Msg` and not `Mdl`, just like you are saying.
ah yeah
My bad, thanks for the help everyone!
Cheers :smile:
(friendly for beginners - experts, anyone who doesn't understand extensible records)
<@U2GPAEU1L>  Thanks!
Sorry for the long message, I am trying to give the context. So my question is, how can I wrap the AddressMsg Address.ChgCountry so that I don't get the error?
`Address.ChgCountry` is expecting a string because your Address modules Msg is: ` | ChgCountry String`
My location msg used to have the field country, and the message ``onInput (config.toMsg ChgCountry)`` worked fine. Now that I am trying to wrap it, I get the error mentioned
sorry not msg but model
what is `submsg`?
I think submsg is (ChgCountry str)
<@U3HQVHERX> The following code provides a string already
